version: "3"
services:
  openvpn-client:
    image: ghcr.io/wfg/openvpn-client
    cap_add:
      - NET_ADMIN 
    environment:
      - KILL_SWITCH=off
      - SUBNETS=192.168.0.0/24,192.168.1.0/24
    devices:
      - /dev/net/tun
    volumes:
      - openvpn:/data/vpn
    ports:
      - 5665:5665                         # Opening port for to access hypothetical Transmission container that would be routing through this VPN
      - 1500:1500                         # Opening port for other application routing through VPN
      - 8080:8080
    restart: unless-stopped
  
  qbittorrent:
    image: ghcr.io/linuxserver/qbittorrent
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=AMERICA/SAO_PAULO
      - WEBUI_PORT=8080
    volumes:
      - qbittorrent:/config
    network_mode: "service:openvpn-client"


volumes:
  openvpn: {}
  gluetun: { }
  qbittorrent: { }