# Telegraf Configuration File (Minimal)
[agent]
  interval = "30s"
  round_interval = true
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  collection_jitter = "0s"
  flush_interval = "10s"
  flush_jitter = "0s"
  precision = ""
  hostname = "DietPi-NAS"
  omit_hostname = false

###############################################################################
# OUTPUT PLUGIN: InfluxDB
###############################################################################
[[outputs.influxdb]]
  urls = ["http://influxdb:8086"]
  database = "snmp"
  username = "admin"
  password = "admin"
  timeout = "5s"

###############################################################################
# INPUT PLUGIN: SNMP (Minimal Setup)
###############################################################################
[[inputs.snmp]]
  agents = ["udp://192.168.15.165:161"]  # Replace with your Synology NAS IP
  version = 2
  community = "public"
  interval = "30s"

  ## CPU Load (1-minute average)
  [[inputs.snmp.field]]
    name = "cpu_load_1min"
    oid = "1.3.6.1.4.1.2021.10.1.3.1"
    conversion = "float"

  ## Memory Usage
  [[inputs.snmp.field]]
    name = "mem_total"
    oid = "1.3.6.1.4.1.2021.4.5.0"
    conversion = "int"

  [[inputs.snmp.field]]
    name = "mem_used"
    oid = "1.3.6.1.4.1.2021.4.11.0"
    conversion = "int"

  ## Disk Usage
  [[inputs.snmp.table]]
    name = "disk_usage"
    oid = "1.3.6.1.4.1.2021.9.9"

    [[inputs.snmp.field]]
      name = "disk_total"
      oid = "1.3.6.1.4.1.2021.9.2.1.6"
      conversion = "int"

    [[inputs.snmp.field]]
      name = "disk_used"
      oid = "1.3.6.1.4.1.2021.9.2.1.8"
      conversion = "int"
